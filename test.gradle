test {
    failFast true

    // set heap size for the test JVM(s)
    minHeapSize = "1g"
    maxHeapSize = "3g"

    if (project.hasProperty('notTest')){
        def testProperty = project.property('notTest').toString()
        def prefix = '**' + File.separator

        if (testProperty.contains('JNA')){
            exclude prefix + 'KhaiiiTaggerTest.class', prefix + 'UTaggerTaggerTest.class'
        }
        if (testProperty.contains('GUI')){
            exclude prefix + 'RhinoOriginDictionaryReaderTest.class', prefix + 'RhinoOriginExtraTest.class', prefix + 'RhinoOriginTagger.test'
        }
    }

    useJUnitPlatform {
        includeEngines 'spek2'
    }
}

jacoco {
    toolVersion = "0.8.4"
}

jacocoTestReport {
    reports {
        xml.enabled = true
        html.enabled = true
    }
}

tasks.check.dependsOn tasks.clean
tasks.check.dependsOn tasks.jacocoTestReport